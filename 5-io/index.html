
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>5 • Saving, Loading, Writing - Unity VR and Eye Tracking Workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#saving-loading-and-writing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Unity VR and Eye Tracking Workshop" class="md-header__button md-logo" aria-label="Unity VR and Eye Tracking Workshop" data-md-component="logo">
      
  <img src="../assets/sfb-x.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Unity VR and Eye Tracking Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5 • Saving, Loading, Writing
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to bright mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to bright mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Unity VR and Eye Tracking Workshop" class="md-nav__button md-logo" aria-label="Unity VR and Eye Tracking Workshop" data-md-component="logo">
      
  <img src="../assets/sfb-x.png" alt="logo">

    </a>
    Unity VR and Eye Tracking Workshop
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../1-first-project/" class="md-nav__link">
        1 • First Unity Project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2-vr-interaction/" class="md-nav__link">
        2 • Interaction in VR
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3-runtime/" class="md-nav__link">
        3 • Runtime
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../4-coroutines/" class="md-nav__link">
        4 • Coroutines
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          5 • Saving, Loading, Writing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        5 • Saving, Loading, Writing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-project" class="md-nav__link">
    New project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-the-scene" class="md-nav__link">
    Set the scene
  </a>
  
    <nav class="md-nav" aria-label="Set the scene">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-signpost" class="md-nav__link">
    A signpost
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefabs" class="md-nav__link">
    Prefabs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-files-texts-and-textures" class="md-nav__link">
    Reading files: texts and textures
  </a>
  
    <nav class="md-nav" aria-label="Reading files: texts and textures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instantiating-a-prefab" class="md-nav__link">
    Instantiating a prefab
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playlists" class="md-nav__link">
    Playlists
  </a>
  
    <nav class="md-nav" aria-label="Playlists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#placing-external-resources" class="md-nav__link">
    Placing external resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing-and-playing-playlists" class="md-nav__link">
    Parsing and playing playlists
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-to-files" class="md-nav__link">
    Writing to files
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../6-gaze/" class="md-nav__link">
        6 • Using Gaze Data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../page-0/" class="md-nav__link">
        Installation and Setup
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-project" class="md-nav__link">
    New project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-the-scene" class="md-nav__link">
    Set the scene
  </a>
  
    <nav class="md-nav" aria-label="Set the scene">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-signpost" class="md-nav__link">
    A signpost
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefabs" class="md-nav__link">
    Prefabs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-files-texts-and-textures" class="md-nav__link">
    Reading files: texts and textures
  </a>
  
    <nav class="md-nav" aria-label="Reading files: texts and textures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instantiating-a-prefab" class="md-nav__link">
    Instantiating a prefab
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playlists" class="md-nav__link">
    Playlists
  </a>
  
    <nav class="md-nav" aria-label="Playlists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#placing-external-resources" class="md-nav__link">
    Placing external resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing-and-playing-playlists" class="md-nav__link">
    Parsing and playing playlists
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-to-files" class="md-nav__link">
    Writing to files
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="saving-loading-and-writing">Saving, Loading, and Writing</h1>
<p>We've seen how Unity can <a href="../3-runtime/#making-it-pop">load an audio file</a> and use it. Now let's see how we can make it create new files by itself, like we would like it to for recording results from experiments.</p>
<h2 id="new-project">New project</h2>
<p>Let's make a new Unity project for this part, as we won't be needing VR for it. Go back to the <a href="../1-first-project/#create-a-first-project-using-the-unity-hub">Unity Hub and do so</a>.</p>
<p>We're going to need the functionality of accessing a user's input, so we need to install the <em>Input System</em> package from the <a href="../2-vr-interaction/#installing-and-importing-packages">Package Manager</a>:</p>
<p><img alt="Installing the Input System Package" src="1-inputsystem.png" title="Install it" /></p>
<p>This may trigger a warning and a prompt to restart the Unity Editor. Allow it:</p>
<p><img alt="Warning" src="2-warning.png" title="Yes" /></p>
<p>We should now be all set to get going with this new project!</p>
<h2 id="set-the-scene">Set the scene</h2>
<p>Let's add some objects to the scene.</p>
<h3 id="a-signpost">A signpost</h3>
<p>Create an empty GameObject and name it "Signpost", making sure it sits at the world origin (Position =<code>(0,0,0)</code>).</p>
<p>Right-clicking on this object, create two new cubes as its <em>children</em> with the following parameters:</p>
<ul>
<li>First cube:<ul>
<li>Name = "Post"</li>
<li>Position = <code>(0,.5,0)</code></li>
<li>Scale = <code>(.09,1,.09)</code></li>
</ul>
</li>
<li>Second cube:<ul>
<li>Name = "Sign"</li>
<li>Position = <code>(0,1.3,0)</code></li>
<li>Scale = <code>(.1,.7,1)</code></li>
</ul>
</li>
</ul>
<p>Now add a <em>Text - TextMeshPro</em> object as a child to sign object in the hierarchy and give it the following parameters:</p>
<ul>
<li>Width = 40, height = 30</li>
<li>Position = <code>(0.55,0,0)</code></li>
<li>Rotation = <code>(0,-90,0)</code></li>
<li>Scale = <code>(.02,.02,1)</code></li>
<li>Give its text a centered alignment</li>
</ul>
<p><img alt="Signpost object" src="3-signpost.png" title="The signpost" /></p>
<h3 id="prefabs">Prefabs</h3>
<p>Let's now turn this signpost into a <em>Prefab</em> — a reusable, preset object that can be easily re-created by Unity.</p>
<p>Make a new <code>Resources</code> folder  within our assets, and simply drag our whole Signpost GameObject from the hierarchy directly in it — a prefab with its parameters is created, giving our Signpost a blue icon!</p>
<p><img alt="Signpost prefab" src="4-prefab.png" title="The signpost as a prefab" /></p>
<p>Remove the Signpost now from our hierarchy — we will use its prefab later.</p>
<h2 id="reading-files-texts-and-textures">Reading files: texts and textures</h2>
<p>Let's get Unity to read some external files to work with in our project — in our case to spice up the appearance of our signpost.</p>
<p>Create a text file inside the Resources folder: right-click it (or within it) in the project browser to open in in Finder/Explorer, and use any old text editor for the next steps.</p>
<p>Name it <code>SignpostData.txt</code>, and give it the following contents:</p>
<div class="highlight"><span class="filename">SignpostData.txt</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pos:-2,0,-1
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>col1:0.9,0.67,0.42
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>col2:1,1,1
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>txt:&lt;i&gt;NOTICE&lt;/i&gt;&lt;br&gt;Some text&lt;br&gt;To display&lt;br&gt;for information
</code></pre></div>
<p>As you may guess, we will use this to put text on the signpost and adjust its position.</p>
<p>To give it some texture instead of the elegant but simple white, <a href="https://www.freepik.com/free-photo/oak-wooden-textured-design-background_18835065.htm#query=wood%20texture&position=0&from_view=keyword" download>download this image</a> and also place it into Resources, renaming it <code>SignpostTexture.jpg</code> in the process.</p>
<p>Create a Scripts folder inside Assets (there shouldn't be one there yet), make a new script there called <code>LoadFromResources</code> and attach it to our Floor object as a component:</p>
<div class="highlight"><span class="filename">LoadFromResources.cs</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">TMPro</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">LoadFromResources</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="c1">// Start is called before the first frame update</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">        </span><span class="c1">// Fill this next!</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>For now it doesn't do anything, so let's give is some functionality — all <strong>within</strong> its <code>Start()</code> method, step by step.</p>
<p>Create variables that can hold a GameObject, a string, and a <a href="https://docs.unity3d.com/ScriptReference/Texture2D.html">Texture2D</a>:</p>
<div class="highlight"><span class="filename">LoadFromResources.cs</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">GameObject</span><span class="w"> </span><span class="n">signpostPrefab</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;(</span><span class="s">&quot;Signpost&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kt">string</span><span class="w"> </span><span class="n">signpostData</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">TextAsset</span><span class="p">&gt;(</span><span class="s">&quot;SignpostData&quot;</span><span class="p">).</span><span class="n">text</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">Texture2D</span><span class="w"> </span><span class="n">signpostTexture</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">&quot;SignpostTexture&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>These variables are immediately assigned the output of their respective <a href="https://docs.unity3d.com/ScriptReference/Resources.Load.html"><code>Resources.Load&lt;Type&gt;("File name")</code></a> methods, which look for files with a specific name within the <em>Resources</em> folder we created before, <em>reads</em> them, and converts them into the specified <em>type</em>: a <em>GameObject</em> fashioned after the Signpost <em>prefab</em>, a <em>Texture2D</em> from our supplied picture, and a <em>string</em> from our SignpostData.txt file.</p>
<p>This last variable, the <code>signpostData</code> string is still somehow vague in its use, so let's change that with a <em>parsing</em> function. Add it right after the previous code block, still inside <code>Start()</code>:</p>
<div class="highlight"><span class="filename">LoadFromResources.cs</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// Parse text file to get custom signpost data</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">SPdataParsed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">signpostData</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">))</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="c1">// Split each line by key:value and store in dictionary</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">lineSplit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;:&#39;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="n">SPdataParsed</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">lineSplit</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">lineSplit</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span><span class="w"></span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This creates a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=net-7.0"><code>Dictionary</code></a> from our text file, taking the colon (:) as a separator for each line: the left part of a line before it (e.g., <code>pos</code>) becomes a <em>key</em> and the right part (e.g., <code>-2,0,-1</code>) the <em>value.</em></p>
<h3 id="instantiating-a-prefab">Instantiating a prefab</h3>
<p>We can now use the information gotten from our signpostData.txt file to <a href="https://docs.unity3d.com/ScriptReference/Object.Instantiate.html"><em>instantiate</em></a> Signpost objects from the Signpost prefab and assign to them parameters that we store in our <code>SPdataParsed</code> dictionary:</p>
<div class="highlight"><span class="filename">LoadFromResources.cs</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// Instantiate prefab as a new gameobject</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">GameObject</span><span class="w"> </span><span class="n">signpostGo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Instantiate</span><span class="p">(</span><span class="n">signpostPrefab</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">Transform</span><span class="w"> </span><span class="n">signpostTrans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">signpostGo</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1">// Set signpost world position</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="hll"><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">posRaw</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SPdataParsed</span><span class="p">[</span><span class="s">&quot;pos&quot;</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">).</span><span class="n">Select</span><span class="p">(</span><span class="kt">float</span><span class="p">.</span><span class="n">Parse</span><span class="p">).</span><span class="n">ToArray</span><span class="p">();</span><span class="w"></span>
</span><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="n">signpostTrans</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">posRaw</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">posRaw</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">posRaw</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="n">MeshRenderer</span><span class="p">[]</span><span class="w"> </span><span class="n">meshRenderers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">signpostGo</span><span class="p">.</span><span class="n">GetComponentsInChildren</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="c1">// Set colour of first child in signpost object (post) </span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="hll"><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">col1Raw</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SPdataParsed</span><span class="p">[</span><span class="s">&quot;col1&quot;</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">).</span><span class="n">Select</span><span class="p">(</span><span class="kt">float</span><span class="p">.</span><span class="n">Parse</span><span class="p">).</span><span class="n">ToArray</span><span class="p">();</span><span class="w"></span>
</span><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="n">meshRenderers</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="n">col1Raw</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">col1Raw</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">col1Raw</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span><span class="w"></span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="c1">// Set colour of second child in signpost object (sign)</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="hll"><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">col2Raw</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SPdataParsed</span><span class="p">[</span><span class="s">&quot;col2&quot;</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">).</span><span class="n">Select</span><span class="p">(</span><span class="kt">float</span><span class="p">.</span><span class="n">Parse</span><span class="p">).</span><span class="n">ToArray</span><span class="p">();</span><span class="w"></span>
</span><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="n">meshRenderers</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="n">col2Raw</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">col2Raw</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">col2Raw</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span><span class="w"></span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="n">meshRenderers</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">material</span><span class="p">.</span><span class="n">mainTexture</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">signpostTexture</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="n">meshRenderers</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">material</span><span class="p">.</span><span class="n">mainTexture</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">signpostTexture</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="c1">// Set text</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="n">TextMeshPro</span><span class="w"> </span><span class="n">signpostTMP</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">signpostGo</span><span class="p">.</span><span class="n">GetComponentInChildren</span><span class="p">&lt;</span><span class="n">TextMeshPro</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="n">signpostTMP</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SPdataParsed</span><span class="p">[</span><span class="s">&quot;txt&quot;</span><span class="p">];</span><span class="w"></span>
</code></pre></div>
<p>These last lines of the <code>Start()</code> function should mostly speak for themselves, even the highlighted operations performed the string values from in the dictionary, though they might contain so far unseen methods like <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.split?view=net-7.0"><code>Split()</code></a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select?view=net-7.0"><code>Select()</code></a> — try to understand what they do (the links should help).</p>
<p>Save the now completed LoadFromResources script, and run the game — you will see a now wooden signpost with some text on it appear at the coordinates given in the text file! It even changed the colors of the different parts of the post, making it even more realistic. You may need to move the camera bit too see it well, though:</p>
<p><img alt="Wooden signpost" src="5-wooden.png" /></p>
<div class="admonition example">
<p class="admonition-title">Challenge: moving the camera, too</p>
<p>Can you apply the same method to also move the camera to a new different position?</p>
<p>You would need to add a new line to the text file, and amend your <em>parser</em> to turn this instruction into action.</p>
</div>
<h2 id="playlists">Playlists</h2>
<p>Our <code>LoadFromResources</code> script has done its job — disable or remove it from the Floor object.</p>
<p>Lets get a bit more fancy and create a playlist to sequence events; in this case we want a number of images to load and show up on the scene, one after another.</p>
<h3 id="placing-external-resources">Placing external resources</h3>
<p>Create a new folder <em>ouside</em> the Assets folder (besides it) called <code>ExternalData</code>. Within that new folder, place a new text file called <code>playlists.txt</code> with exactly the following content:</p>
<div class="highlight"><span class="filename">playlists.txt</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>0,1,2,3,4,5
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>5,4,3,2,1,0
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The <em>format</em> is important here, meaning the number of items in one line, them being separated by commas, etc.</p>
<p>You can change the order of the numbers, add more lines in the same format, etc. — this flexibility is the whole point of creating a simple playlist file format like this!</p>
</div>
<p>Within the ExternalData folder, create a new folder called <code>images</code>. Download the six images from here (<a href="external/img_00.jpg" download>1</a>, <a href="external/img_01.jpg" download>2</a>, <a href="external/img_02.jpg" download>3</a>, <a href="external/img_03.jpg" download>4</a>, <a href="external/img_04.jpg" download>4</a>, <a href="external/img_05.jpg" download>6</a>) and place them inside <code>images</code> in the project browser — make sure to keep their filenames intact (<code>img_00.jpg</code>, etc.).</p>
<h3 id="parsing-and-playing-playlists">Parsing and playing playlists</h3>
<p>We want these images to displayed on a <em>Quad</em> 3D object in the scene, so create one in the hierarchy with the following parameters:</p>
<ul>
<li>Name = <code>DisplayQuad</code></li>
<li>Position = <code>(-1.5,1.3,0)</code></li>
<li>Rotation = <code>(0,-90,0)</code></li>
<li>Scale = <code>(1.92,1.08,1)</code><ul>
<li>1.92 and 1.08 — multiply by 1,000 and you get 1920 and 1080. Looks familiar?</li>
</ul>
</li>
</ul>
<p>Create a new script for the floor named <code>LoadFromExternalFolder</code> to put them into action:</p>
<div class="highlight"><span class="filename">LoadFromExternalFolder.cs</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.IO</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEditor</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">LoadFromExternalFolder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">dirpathname</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;ExternalData&quot;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">dirpath</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">MeshRenderer</span><span class="w"> </span><span class="n">displayQuadMR</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="hll"><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Material</span><span class="w"> </span><span class="n">displayQaudMat</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">subj_index</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">playlist</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Texture2D</span><span class="w"> </span><span class="nf">LoadImageAsTexture</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">filePath</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">        </span><span class="c1">// Load raw data from file</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">        </span><span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">fileData</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="n">ReadAllBytes</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">        </span><span class="n">Texture2D</span><span class="w"> </span><span class="n">tmpTex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Texture2D</span><span class="p">(</span><span class="m">1920</span><span class="p">,</span><span class="w"> </span><span class="m">1080</span><span class="p">,</span><span class="w"> </span><span class="n">TextureFormat</span><span class="p">.</span><span class="n">RGB24</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">        </span><span class="n">tmpTex</span><span class="p">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="n">fileData</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">tmpTex</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<details class="info">
<summary>Assumptions</summary>
<p>The <code>LoadImageAsTexture()</code> function makes a lot of assumptions here. First, we assume that there is a valid file path stored in <code>filePath</code> at all, and not just gibberish. Then we further assume that the data at that location is an image that can be loaded in a texture, even with the specific dimensions <code>1920, 1080</code> and in <code>RGB24</code> color format.</p>
<p>While getting the dimensions and color format wrong wouldn't cause that much trouble other than a potentially garbled image, trying to read a file that's not there can cause the game to crash!</p>
<p>Ususally, you would <em>guard</em> agains this by first checking if the file exists at all, and wouldn't you know it, there's a fuction for that: <a href="https://docs.unity3d.com/ScriptReference/Windows.File.Exists.html"><code>File.Exists()</code></a>.</p>
<p>To be on the safe side, you can check the result of <code>File.Exists(filePath)</code> in an <code>if()</code> statement and only proceed with loading if it's positive. Keep in mind that you still have to return <em>some</em> <code>Texture2D</code> and can't just return from you function with nothing to show for…</p>
<p>All this to say: Playing it safe is not for lazy people, but it can sure give you a feeling of security (and save you from some crashes).</p>
</details>
<p>Being very similar in structure to our previous script, it should be quite clear what it does. The difference so far are the variables to hold our Quad's MeshRenderer and Material, and and index to keep track of our subject. Let's use these in the <code>Start()</code> method:</p>
<div class="highlight"><span class="filename">LoadFromExternalFolder.cs</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">IEnumerator</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="n">displayQaudMat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">displayQuadMR</span><span class="p">.</span><span class="n">material</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="n">dirpath</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Directory</span><span class="p">.</span><span class="n">GetParent</span><span class="p">(</span><span class="n">Application</span><span class="p">.</span><span class="n">dataPath</span><span class="p">).</span><span class="n">ToString</span><span class="p">()</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="n">DirectorySeparatorChar</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">dirpathname</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="c1">// image order playlist</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="c1">//    A line represent the order to display images</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="c1">//    There is one line per subject</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">    </span><span class="c1">// Load entire image order playlist file segmened by line return</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">    </span><span class="n">playlist</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="n">ReadAllLines</span><span class="p">(</span><span class="s">$&quot;{dirpath}/playlists.txt&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">        </span><span class="c1">// Skip all lines to go to the one we want</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">        </span><span class="p">.</span><span class="n">Skip</span><span class="p">(</span><span class="n">subj_index</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">        </span><span class="c1">// Get one line</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">        </span><span class="p">.</span><span class="n">Take</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">First</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">        </span><span class="c1">// Split line by comma</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">        </span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">        </span><span class="c1">// Convert string to int</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">        </span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">).</span><span class="n">ToArray</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ipl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">ipl</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">playlist</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">ipl</span><span class="p">++)</span><span class="w"></span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">iImg</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">playlist</span><span class="p">[</span><span class="n">ipl</span><span class="p">];</span><span class="w"></span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">        </span><span class="n">displayQaudMat</span><span class="p">.</span><span class="n">mainTexture</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LoadImageAsTexture</span><span class="p">(</span><span class="s">$&quot;{dirpath}/images/img_{iImg:D2}.jpg&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">        </span><span class="k">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">WaitForSeconds</span><span class="p">(</span><span class="m">2f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="hll"><span class="w">    </span><span class="n">Application</span><span class="p">.</span><span class="n">Quit</span><span class="p">();</span><span class="w"></span>
</span><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="cp">#if UNITY_EDITOR</span><span class="w"></span>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">    </span><span class="n">EditorApplication</span><span class="p">.</span><span class="n">isPlaying</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="cp">#endif</span><span class="w"></span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Save the script, make sure its attached as a component to our floor, and assign our Quad to the appropriate field.</p>
<p>It will now cycle through the images it loads in the given sequence read from the playlists file, which we can specify in the components inspector with the <em>Subj_index</em> field (starting with 0), and then quit the game!</p>
<details class="info">
<summary>Preprocessor Directives — Unity Macros</summary>
<p>Macros #if #endif</p>
</details>
<div style='border-color: #018281; border-style: solid;'>
<div style='overflow: hidden; position:relative; margin-top:-5%; margin-bottom:-10%;padding-bottom:calc(70.80% + 33px); clip-path: inset(6.7% 0 13% 0)'>
<iframe src='https://gfycat.com/ifr/perfectsmartcoypu?controls=0&hd=1' frameborder='0' scrolling='no'' width='100%' height='100%' style='position:absolute;top:0;left:0;'></iframe>
</div></div>

<h2 id="writing-to-files">Writing to files</h2>
<p>Let's now turn the tables on our file system and <em>write</em> something to it, instead of only reading!</p>
<p>Deactivate the display Quad, deactivate the LoadFromExternalFolder component from our Floor, and create yet another new script for it. Call it <code>SaveToExternalFolder</code>:</p>
<div class="highlight"><span class="filename">SaveToExternalFolder.cs</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.IO</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine.InputSystem</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">SaveToExternalFolder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">dirpathname</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;ExternalData/subjData/&quot;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">dirpath</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">subj_index</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="hll"><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">StreamWriter</span><span class="w"> </span><span class="n">expeDataWriter</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">GetTimestamp</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">DateTimeOffset</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToUnixTimeMilliseconds</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnApplicationQuit</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">        </span><span class="n">expeDataWriter</span><span class="p">.</span><span class="n">Flush</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">        </span><span class="n">expeDataWriter</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>For now it only contains the now-familiar variables to hold the names of file paths and subject index, as well as a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamwriter?view=net-6.0"><code>StreamWriter</code></a> and a simple <em>getter</em> method that returns a <em>time stamp</em> using the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.datetimeoffset.now?view=net-6.0"><code>DateTimeOffset</code></a> structure.</p>
<p>There is now also a method called <code>OnApplicationQuit()</code> — similar to how <code>Start()</code> is automatically executed by Unity when you press the Play button, this one runs just as stop the game, be it by pressing the play button again or quitting the whole Unity editor (or the final, built <a href="https://docs.unity3d.com/Manual/WindowsStandaloneBinaries.html">binary executable</a>).</p>
<p>This is important if you're writing to external files: the <code>Flush()</code> and <code>Close()</code> commands make sure that all potentially unwritten contents of the StreamWriter are <em>flushed out</em> to the file, and that the file is then properly closed — this is just basic file system hygiene, perhaps not too dissimilar from the one you practice yourself.</p>
<p>Let's put these things together in a <code>Start()</code> IEnumerator:</p>
<div class="highlight"><span class="filename">SaveToExternalFolder.cs</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">IEnumerator</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="n">dirpath</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Directory</span><span class="p">.</span><span class="n">GetParent</span><span class="p">(</span><span class="n">Application</span><span class="p">.</span><span class="n">dataPath</span><span class="p">).</span><span class="n">ToString</span><span class="p">()</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="n">DirectorySeparatorChar</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">dirpathname</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="n">Directory</span><span class="p">.</span><span class="n">CreateDirectory</span><span class="p">(</span><span class="s">$&quot;{dirpath}&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="n">expeDataWriter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StreamWriter</span><span class="p">(</span><span class="s">$&quot;{dirpath}/subj_{subj_index}.txt&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">        </span><span class="k">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">WaitUntil</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">Keyboard</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">anyKey</span><span class="p">.</span><span class="n">wasReleasedThisFrame</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ik</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">ik</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyCount</span><span class="p">;</span><span class="w"> </span><span class="n">ik</span><span class="p">++)</span><span class="w"></span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">        </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">            </span><span class="kt">string</span><span class="w"> </span><span class="n">keyName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Keyboard</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">allKeys</span><span class="p">[</span><span class="n">ik</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">            </span><span class="kt">bool</span><span class="w"> </span><span class="n">keyState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Keyboard</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">allKeys</span><span class="p">[</span><span class="n">ik</span><span class="p">].</span><span class="n">wasReleasedThisFrame</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(!</span><span class="n">keyState</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">            </span><span class="kt">string</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">$&quot;{GetTimestamp()}: user released \&quot;{keyName}\&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">            </span><span class="n">expeDataWriter</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">            </span><span class="n">print</span><span class="p">(</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>First, it <a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.directory.createdirectory?view=net-6.0">creates a new directory</a> at the constructed <code>dirpath</code> if it doesn't exist yet, then instantiates a new <code>StreamWriter</code> with a new file, which itself is constructed from the <code>dirpath</code> and the <code>subj_index</code> using <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated"><em>String Interpolation</em></a> (the <code>$</code> sign). Try to understand how the final file name and directory are being assembled!</p>
<p>Then an endless loop (<code>while (true)</code>) is being run that keeps waiting for the user to hit (or rather <em>release</em> after hitting) keys on the keyboard using <code>WaitUntil</code> and the new <a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/manual/QuickStartGuide.html"><em>Unity Input System</em></a> in the shape of <code>Keyboard.current.anyKey.wasReleasedThisFrame</code>.</p>
<p>It then looks at which keys were being pressed and puts their names in a string. As we can't easily access the exact key that was pressed, we just write down all current keys (<code>Keyboard.current.allKeys</code>). We then check if one of these current keys was just released in the last frame — if not, we exit this loop with the <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/jump-statements"><code>continue</code> jump statement</a>.</p>
<p>If the key <em>was</em> just released, we formulate a message including its name and the current time stamp (from our <code>GetTimeStamp()</code> method), and hand it over to the <code>expeDataWriter</code> to write a line in our external file using <code>WriteLine()</code>. Additionally, we <code>print</code> this message to the console.</p>
<p>And that's it for external files! Now let's finally try out interacting with gaze data in Unity in the next tutorial.</p>
<div class="admonition example">
<p class="admonition-title">Challenge: elapsed time</p>
<p>Instead of writing the time stamp (the absolute, real-world time), how about writing down the time that has elapsed between two key releases? To calculate that, you would need to keep track of the time the last key was pressed and subtract that from the current time. Give it a try if you want!</p>
</div>
<div class="admonition example">
<p class="admonition-title">Challenge: slide show</p>
<p>Can you combine the functionality of our last script with the previous one to have the user manually advance the images shown in on the signpost?</p>
</div>
<!-- 
<div class="highlight"><span class="filename">LoadFromResources.cs</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.IO</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEditor</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">LoadFromExternalFolder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Texture2D</span><span class="w"> </span><span class="nf">LoadImageAsTexture</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">filePath</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">        </span><span class="c1">// Load raw data from file</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">        </span><span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">fileData</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">File</span><span class="p">.</span><span class="n">ReadAllBytes</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="hll"><span class="w">        </span><span class="n">Texture2D</span><span class="w"> </span><span class="n">tmpTex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Texture2D</span><span class="p">(</span><span class="m">1920</span><span class="p">,</span><span class="w"> </span><span class="m">1080</span><span class="p">,</span><span class="w"> </span><span class="n">TextureFormat</span><span class="p">.</span><span class="n">RGB24</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="hll"><span class="w">        </span><span class="n">tmpTex</span><span class="p">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="n">fileData</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">tmpTex</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>

`LoadImageAsTexture(string filePath)` takes a file path `string` and attempts to load anything it can find at this location into a `byte` array called `fileData`.

Because we promise to only use this function in accordance to its name and only load images with it, we can force the loaded byte array into a [`Texture2D`](https://docs.unity3d.com/ScriptReference/Texture2D.html) variable with the highlighted lines. The resulting texture is returned.



Let's do something with the texture we hopefully load here — assign it to the signpost! Add some variables and the `Start()` IEnumerator to our script:


```csharp title="LoadFromResources.cs" hl_lines="14 15"

public static string dirpathname = "ExternalData";
public static string dirpath;

public MeshRenderer displayQuadMR;
private Material displayQaudMat;

IEnumerator Start()
{
    displayQaudMat = displayQuadMR.material;

    dirpath = Directory.GetParent(Application.dataPath).ToString() + Path.DirectorySeparatorChar + dirpathname;

    displayQaudMat.mainTexture = LoadImageAsTexture($"{dirpath}/images/img_{iImg:D2}.jpg");
}
``` -->





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../4-coroutines/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 4 • Coroutines" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              4 • Coroutines
            </div>
          </div>
        </a>
      
      
        
        <a href="../6-gaze/" class="md-footer__link md-footer__link--next" aria-label="Next: 6 • Using Gaze Data" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              6 • Using Gaze Data
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.indexes", "toc.follow", "header.autohide"], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>