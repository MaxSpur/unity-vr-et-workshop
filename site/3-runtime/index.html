
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>3 • Runtime - Unity VR and Eye Tracking Workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#runtime-automated-processes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Unity VR and Eye Tracking Workshop" class="md-header__button md-logo" aria-label="Unity VR and Eye Tracking Workshop" data-md-component="logo">
      
  <img src="../assets/sfb-x.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Unity VR and Eye Tracking Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3 • Runtime
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to bright mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to bright mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Unity VR and Eye Tracking Workshop" class="md-nav__button md-logo" aria-label="Unity VR and Eye Tracking Workshop" data-md-component="logo">
      
  <img src="../assets/sfb-x.png" alt="logo">

    </a>
    Unity VR and Eye Tracking Workshop
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../1-first-project/" class="md-nav__link">
        1 • First Unity Project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2-vr-interaction/" class="md-nav__link">
        2 • Interaction in VR
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          3 • Runtime
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        3 • Runtime
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reuse-the-previous-project" class="md-nav__link">
    Reuse the previous project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shape-of-a-cube-factory" class="md-nav__link">
    Shape of a cube factory
  </a>
  
    <nav class="md-nav" aria-label="Shape of a cube factory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labeling-with-textmeshpro" class="md-nav__link">
    Labeling with TextMeshPro
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#factory-interaction" class="md-nav__link">
    Factory interaction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#factory-scripting" class="md-nav__link">
    Factory scripting
  </a>
  
    <nav class="md-nav" aria-label="Factory scripting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cube-creation" class="md-nav__link">
    Cube creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requesting-new-cubes" class="md-nav__link">
    Requesting new cubes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlling-factory-output" class="md-nav__link">
    Controlling factory output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cube-removal" class="md-nav__link">
    Cube removal
  </a>
  
    <nav class="md-nav" aria-label="Cube removal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#destroyer-script" class="md-nav__link">
    Destroyer script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attaching-the-destroyer" class="md-nav__link">
    Attaching the destroyer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-it-pop" class="md-nav__link">
    Making it pop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../4-coroutines/" class="md-nav__link">
        4 • Coroutines
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../5-io/" class="md-nav__link">
        5 • Saving, Loading, Sampling
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../6-gaze/" class="md-nav__link">
        6 • Using Gaze Data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../page-0/" class="md-nav__link">
        Installation and Setup
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reuse-the-previous-project" class="md-nav__link">
    Reuse the previous project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shape-of-a-cube-factory" class="md-nav__link">
    Shape of a cube factory
  </a>
  
    <nav class="md-nav" aria-label="Shape of a cube factory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labeling-with-textmeshpro" class="md-nav__link">
    Labeling with TextMeshPro
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#factory-interaction" class="md-nav__link">
    Factory interaction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#factory-scripting" class="md-nav__link">
    Factory scripting
  </a>
  
    <nav class="md-nav" aria-label="Factory scripting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cube-creation" class="md-nav__link">
    Cube creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requesting-new-cubes" class="md-nav__link">
    Requesting new cubes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlling-factory-output" class="md-nav__link">
    Controlling factory output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cube-removal" class="md-nav__link">
    Cube removal
  </a>
  
    <nav class="md-nav" aria-label="Cube removal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#destroyer-script" class="md-nav__link">
    Destroyer script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attaching-the-destroyer" class="md-nav__link">
    Attaching the destroyer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-it-pop" class="md-nav__link">
    Making it pop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="runtime-automated-processes">Runtime: Automated Processes</h1>
<p>For now, our scenes have only strictly reacted to our inputs. Let's create some automated processes.</p>
<h2 id="reuse-the-previous-project">Reuse the previous project</h2>
<p>For this project, let's continue building on our previous one, without having to again import the libraries and creating our cubes or spheres (from the previous <a href="../2-vr-interaction/#switching-colors-of-a-material">challenge</a>) that trigger collisions.</p>
<p>Just remove (or deactivate) the cylinder GameObject from the hierarchy and delete the <em>Controller Input (Script)</em> component from our [CameraRig] GameObject.</p>
<h2 id="shape-of-a-cube-factory">Shape of a cube factory</h2>
<p>What's a better example for automation than a factory? Let's make a <em>cube factory.</em></p>
<p>Create a new, empty GameObject in the hierarchy ("Create Empty") and name it <code>CubeFactory</code>. Place it at <code>(-1, 0, -0.25)</code>.</p>
<p>Now right-click on it to create <em>child</em> objects within it: six new cubes. Their names, positions, and scales should be as below.</p>
<div class="admonition info">
<p class="admonition-title">Editing Time Savers</p>
<p>You can quickly enter these numbers by hitting the Tab-key after entering each one, which will advance the focus to the next field. You can also save time by omitting the zeros before periods: the editor will fill them in automatically.</p>
</div>
<ol>
<li>"CubeRight"<ul>
<li>Position <code>(0, 0.9, 0)</code></li>
<li>Scale <code>(0.5, 1.8, 0.25)</code></li>
</ul>
</li>
<li>"CubeLeft"<ul>
<li>Position <code>(0, 0.9, 0.5)</code></li>
<li>Scale <code>(0.5, 1.8, 0.25)</code></li>
</ul>
</li>
<li>"CubeBack"<ul>
<li>Position <code>(-0.2, 0.9, 0.25)</code></li>
<li>Scale <code>(0.1, 1.8, 0.25)</code></li>
</ul>
</li>
<li>"CubeSlope"<ul>
<li>Position <code>(0, 0.125, 0.25)</code></li>
<li>Rotation <code>(0, 0, 55)</code></li>
<li>Scale <code>(0.1, 0.6, 0.25)</code></li>
</ul>
</li>
<li>"CubeFront"<ul>
<li>Position <code>(0.2, 1.175, 0.25)</code></li>
<li>Scale <code>(0.1, 1.25, 0.25)</code></li>
</ul>
</li>
<li>"CubeInteract"<ul>
<li>Position <code>(0.21, 1, 0.25)</code></li>
<li>Scale <code>(0.1, 0.2, 0.2)</code></li>
</ul>
</li>
</ol>
<p>You should end up with a hollow cuboid that has a sloped opening at its lower end — kind of like a chimney. "CubeInteract" should stick out just a little:</p>
<p><img alt="Cube factory" src="1-cube-factory.png" title="A cube factory, ready to produce" /></p>
<h3 id="labeling-with-textmeshpro">Labeling with TextMeshPro</h3>
<p>Another very useful "3D Object" we can add to the factory is <em>Text - TextMeshPro.</em> Create one within the CubeFactory GameObject, and give it the following parameters (it may ask you to import some resources the first time you do that — let it):</p>
<ul>
<li>Within the <em>Rect Transform</em> component:<ul>
<li>Position = <code>(0.251, 1.25, 0.25)</code></li>
<li>Width = 70, Height = 20</li>
<li>Rotation = <code>(0, -90, 0)</code></li>
<li>Scale = <code>(0.01, 0.01, 1)</code></li>
</ul>
</li>
<li>Center and middle alignment icons in its <em>TextMeshPro - Text</em> component</li>
<li>
<p>The following text in place of "Sample text":</p>
<blockquote>
<p>&lt;b&gt;Cube Factory&lt;\b&gt;</p>
<p>Touch the red part with the controller and press the trigger to create a new cube
+ Set its Vertex Color to anything you like</p>
</blockquote>
</li>
</ul>
<p>You should now have a helpful label for the cube factory:</p>
<p><img alt="Factory label" src="2-factory-label.png" title="Now it's readable" /></p>
<h2 id="factory-interaction">Factory interaction</h2>
<p>For now, it's just an empty structure, doing nothing. Let's change that with some action.</p>
<p>Create a new script for the cube we called <strong>CubeInteract</strong>, called <code>IsCollidingChecker</code>. It will be very similar to our old <code>SwitchColorOnCollide</code> script:</p>
<div class="highlight"><span class="filename">IsCollidingChecker.cs</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">IsCollidingChecker</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isColliding</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Color</span><span class="p">[]</span><span class="w"> </span><span class="n">colors</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Material</span><span class="w"> </span><span class="n">_material</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="c1">// Start is called before the first frame update</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span><span class="n">_material</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;().</span><span class="n">material</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="n">_material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">colors</span><span class="p">[</span><span class="m">0</span><span class="p">];</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">        </span><span class="n">isColliding</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">        </span><span class="n">_material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">colors</span><span class="p">[</span><span class="m">1</span><span class="p">];</span><span class="w"></span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnTriggerExit</span><span class="p">(</span><span class="n">Collider</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">        </span><span class="n">isColliding</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">        </span><span class="n">_material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">colors</span><span class="p">[</span><span class="m">0</span><span class="p">];</span><span class="w"></span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The main difference is that it now exposes its <code>isColliding</code> boolean variable to other objects. This variable is set to <code>True</code> whenever it is in collision, and <code>False</code> when not, while at the same time changing colors.</p>
<p>Save the script and assign two colors of your liking to this component <a href="../2-vr-interaction/#switching-colors-of-a-material">as we did before</a>.</p>
<p>Running the game, you can now switch the color of the CubeInteract object by hitting it with your controller, and you'll also see its <em>Is Colliding</em> value change accordingly:</p>
<div style='border-color: #018281; border-style: solid;'>
<div style='overflow: hidden; margin-top:-5.1%; margin-bottom:-34%; position:relative; padding-bottom:calc(70.80% + 33px); clip-path: inset(6.7% 0 45% 0)'>
<iframe src='https://gfycat.com/ifr/welldocumentedultimateappaloosa?controls=0&hd=1' frameborder='0' scrolling='no'' width='100%' height='100%' style='position:absolute;top:0;left:0;'></iframe>
</div></div>

<h2 id="factory-scripting">Factory scripting</h2>
<p>The factory is still not working as advertised above this fancy button. Let's change that and make some cubes.</p>
<p>Create a new script for the CubeFactory object itself, called… <code>CubeFactory</code>.</p>
<div class="admonition info">
<p class="admonition-title">Script scraps</p>
<p>This will be a larger script, so we will from now on only show parts of its code at a time — by now you should be familiar with which parts belong where. Don't worry about the order of variables and functions: as long as they are within the correct scope (brackets), it does not matter which appear first in your script.</p>
</div>
<p>We will be using even more libraries now than before, so make sure to include all these <code>using</code> statements at the top.</p>
<h3 id="variables">Variables</h3>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Diagnostics</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine.InputSystem</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Valve.VR</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Within the <code>CubeFactory</code> class definition, declare the following variables:</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">public</span><span class="w"> </span><span class="n">IsCollidingChecker</span><span class="w"> </span><span class="n">isCollidingChecker</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">public</span><span class="w"> </span><span class="n">SteamVR_Action_Boolean</span><span class="w"> </span><span class="n">Trigger</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">private</span><span class="w"> </span><span class="n">Stopwatch</span><span class="w"> </span><span class="n">stopwatch</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">cooldown</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">500</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The first two should already be familiar from our <a href="2-vr-interaction/#interacting-with-objects--part-3">color-changing cylinder</a>.</p>
<p>The second two will help us with timing: we only want to let the factory produce cubes at minimum intervals, so we create a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch?view=net-7.0"><code>Stopwatch</code></a> to measure passing time, and a <code>cooldown</code> variable that lets us say how long it should rest before pumping out another cube.</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="n">stopwatch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Stopwatch</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="n">stopwatch</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="hll"><span class="p">}</span><span class="w"></span>
</span></code></pre></div>
<p>At the start of the game, we only <em>initialize</em> the <code>stopwatch</code> variable using the <code>new Stopwatch()</code> command, and <code>start()</code> it immediately.</p>
<h3 id="cube-creation">Cube creation</h3>
<p>Let's now create the function that will actually generate new cubes that interact with physics, and with random colors to boot!</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">public</span><span class="w"> </span><span class="n">GameObject</span><span class="w"> </span><span class="nf">CreateCube</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">GameObject</span><span class="w"> </span><span class="n">cubeGo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">CreatePrimitive</span><span class="p">(</span><span class="n">PrimitiveType</span><span class="p">.</span><span class="n">Cube</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="n">Transform</span><span class="w"> </span><span class="n">cubeTrans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="n">cubeTrans</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(-</span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="m">0.9f</span><span class="p">,</span><span class="w"> </span><span class="m">0f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="n">cubeTrans</span><span class="p">.</span><span class="n">localScale</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(.</span><span class="m">15f</span><span class="p">,.</span><span class="m">15f</span><span class="p">,.</span><span class="m">15f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;().</span><span class="n">material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Random</span><span class="p">.</span><span class="n">ColorHSV</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="n">Rigidbody</span><span class="w"> </span><span class="n">cubeRB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="c1">// Add randomness otherwise cubes will all show the exact same trajectory</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="n">cubeRB</span><span class="p">.</span><span class="n">velocity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="k">value</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">.</span><span class="m">1f</span><span class="p">,-</span><span class="m">1</span><span class="p">,</span><span class="n">Random</span><span class="p">.</span><span class="k">value</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">.</span><span class="m">1f</span><span class="p">)</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">5f</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>When called, it creates a new GameObject we call <code>cubeGo</code> by invoking the GameObject class' <a href="https://docs.unity3d.com/2020.1/Documentation/ScriptReference/GameObject.CreatePrimitive.html"><code>CreatePrimitive</code> function</a>, with <code>PrimitiveType.Cube</code> as the input.</p>
<p>We take this new object's transform and store a reference to it in a new Transform object called <code>cubeTrans</code>, so that we can directly work on it in the next two lines, where we give it a new position and scale.</p>
<p>Similar to how we changed the cylinder's or the CubeInteract's colors, we assign <code>cubeGo</code>'s default material a new color, in this case a <a href="https://docs.unity3d.com/2020.1/Documentation/ScriptReference/Random.ColorHSV.html"><code>Random</code> combination</a> of <strong>H</strong> ue, <strong>S</strong> aturation, and <strong>V</strong> alue (brightness).</p>
<p>Finally, we add a Rigidbody component to it, to which we also assign a random (within bounds) velocity, to spice things up a bit in their trajectories.</p>
<p>Since this function is declared not as <code>void</code>, it is expected to return something, in this case a <code>GameObject</code> (see the first line of the above code — the function's declaration). We obviously want to <code>return</code> the just created <code>cubeGo</code> object, which is what the last line does.</p>
<h3 id="requesting-new-cubes">Requesting new cubes</h3>
<p>We can now go to the <code>Update()</code> loop and a call to our cube production function:</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// Update is called once per frame</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">void</span><span class="w"> </span><span class="nf">Update</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stopwatch</span><span class="p">.</span><span class="n">Elapsed</span><span class="p">.</span><span class="n">Milliseconds</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="n">cooldown</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">        </span><span class="n">CreateCube</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">        </span><span class="n">stopwatch</span><span class="p">.</span><span class="n">Restart</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>To keep our cube production in check, we must first verify that our set stopwatch has measured enough milliseconds (more than our set cool-down period). Only then will a cube be created, and the stopwatch restarted.</p>
<p>Save the code and see it run: the factory's output is in full swing!</p>
<div style='border-color: #018281; border-style: solid;'>
<div style='overflow: hidden; margin-top:-5.1%; margin-bottom:-34%; position:relative; padding-bottom:calc(70.80% + 33px); clip-path: inset(6.7% 0 45% 0)'>
<iframe src='https://gfycat.com/ifr/leantightduckbillplatypus?controls=0&hd=1' frameborder='0' scrolling='no'' width='100%' height='100%' style='position:absolute;top:0;left:0;'></iframe>
</div></div>

<details class="info">
<summary>Trouble with UnityEngine.InputSystem?</summary>
<p>It may be that your code editor and the Unity complain about a missing <code>UnityEngine.InputSystem</code>. This can be easily fixed by going to the <a href="../2-vr-interaction/#installing-and-importing-packages">package manager</a> and searching for <code>InputSystem</code> in the <em>Unity Registry</em>. Install it, which will also prompt Unity configure some settings and restart the editor, so make sure to save your changes before doing so.</p>
</details>
<h3 id="controlling-factory-output">Controlling factory output</h3>
<p>To avoid a <a href="https://en.wikipedia.org/wiki/The_Trouble_with_Tribbles">Tribbles-type situation</a>, we need to have some control over the factory's cube output.</p>
<div style='border-color: #018281; border-style: solid;'>
<div style='overflow: hidden; position:relative; margin-top:-5%; margin-bottom:-10%;padding-bottom:calc(70.80% + 33px); clip-path: inset(6.7% 0 13% 0)'>
<iframe src='https://gfycat.com/ifr/importantmagnificentbongo?controls=0&hd=1' frameborder='0' scrolling='no'' width='100%' height='100%' style='position:absolute;top:0;left:0;'></iframe>
</div></div>

<p>We can add some more conditions to our <code>if</code> statement in the <code>Update()</code> loop to only allow authorized personnel to run the production:</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">void</span><span class="w"> </span><span class="nf">Update</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stopwatch</span><span class="p">.</span><span class="n">Elapsed</span><span class="p">.</span><span class="n">Milliseconds</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="n">cooldown</span><span class="w"></span>
</span><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="hll"><span class="w">        </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">isCollidingChecker</span><span class="p">.</span><span class="n">isColliding</span><span class="w"></span>
</span><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="hll"><span class="w">        </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">Trigger</span><span class="p">.</span><span class="n">state</span><span class="p">)</span><span class="w"></span>
</span><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">        </span><span class="n">CreateCube</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">        </span><span class="n">stopwatch</span><span class="p">.</span><span class="n">Restart</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The And-operator <code>&amp;&amp;</code> can be used to chain logic statements together. You can put everything within the round brackets of the <code>if()</code> statement in one line, but this way we preserve legibility of an otherwise unwieldy, long line.</p>
<p>Now the <code>if()</code> statement will execute its block if the stopwatch has measured more than <code>cooldown</code>, AND a collision is detected by the CubeInspect object, AND the trigger is pulled. If any one of these conditions is not true, no cubes will be produced. This should keep the factory floor safe.</p>
<p>Save the code, go back to the editor, and assign the CubeInteract object's <em>Is Colliding Checker</em> component to the cube factory script component (<a href="../2-vr-interaction/#steamvr-actions">like we did with the cylinder</a>), and set the Trigger again to <em>InteractUI</em> (<a href="../2-vr-interaction/#steamvr-actions">see cylinder</a>).</p>
<div style='border-color: #018281; border-style: solid;'>
<div style='overflow: hidden; margin-top:-5.1%; margin-bottom:-34%; position:relative; padding-bottom:calc(70.80% + 33px); clip-path: inset(6.7% 0 45% 0)'>
<iframe src='https://gfycat.com/ifr/affectionateseveraldog?controls=0&hd=1' frameborder='0' scrolling='no'' width='100%' height='100%' style='position:absolute;top:0;left:0;'></iframe>
</div></div>

<details class="tip">
<summary>Manual override</summary>
<p>Often it is good to include a manual override over conditions like we have above for the cube production. You can extend the <code>if()</code> statement with one more clause, this time an OR <code>||</code> operator to make it look like this:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stopwatch</span><span class="p">.</span><span class="n">Elapsed</span><span class="p">.</span><span class="n">Milliseconds</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="n">cooldown</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">isCollidingChecker</span><span class="p">.</span><span class="n">isColliding</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">Trigger</span><span class="p">.</span><span class="n">state</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="p">||</span><span class="w"> </span><span class="n">Keyboard</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">spaceKey</span><span class="p">.</span><span class="n">wasReleasedThisFrame</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
Now the <em>only</em> condition necessary to trigger the production of the next cube the user hitting the space button on the computer that's running Unity (while focused on the Game view), bypassing all other rules. Cubes will be now produced as fast as you can press the space bar — don't break it!</p>
</details>
<h2 id="cube-removal">Cube removal</h2>
<p>Even with controlled production, cubes still pile up eventually. Let's clean them up.</p>
<h3 id="destroyer-script">Destroyer script</h3>
<p>Create a new script in the scripts folder without attaching it to any GameObject and name it <code>DestroyOnTouch</code>. We want it to come into action every time our controllers (i.e., their attached cubes or spheres) collide with a freshly produced cube to pop them into oblivion.</p>
<div class="highlight"><span class="filename">DestroyOnTouch.cs</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">DestroyOnTouch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">        </span><span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The now familiar <code>OnTriggerEnter()</code> function will simply call the <code>Destroy()</code> command on <code>gameObject</code> itself, which refers to the GameObject this script is working within. As it is now, the code just sits in our Scripts folder and does nothing, so let's attach it to all factory-fresh cubes our CubeFactory is producing.</p>
<h3 id="attaching-the-destroyer">Attaching the destroyer</h3>
<p>To attach this script (<em>make sure to save it first!</em>) to new cubes, we simply need to modify the <code>CreateCube()</code> function within <code>CubeFactory</code>:</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">public</span><span class="w"> </span><span class="n">GameObject</span><span class="w"> </span><span class="nf">CreateCube</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="n">GameObject</span><span class="w"> </span><span class="n">cubeGo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">CreatePrimitive</span><span class="p">(</span><span class="n">PrimitiveType</span><span class="p">.</span><span class="n">Cube</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="n">Transform</span><span class="w"> </span><span class="n">cubeTrans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="n">cubeTrans</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(-</span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="m">0.9f</span><span class="p">,</span><span class="w"> </span><span class="m">0f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="n">cubeTrans</span><span class="p">.</span><span class="n">localScale</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(.</span><span class="m">15f</span><span class="p">,.</span><span class="m">15f</span><span class="p">,.</span><span class="m">15f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;().</span><span class="n">material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Random</span><span class="p">.</span><span class="n">ColorHSV</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="n">Rigidbody</span><span class="w"> </span><span class="n">cubeRB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">    </span><span class="c1">// Add randomness otherwise cubes will all show the exact same trajectory</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="n">cubeRB</span><span class="p">.</span><span class="n">velocity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="k">value</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">.</span><span class="m">1f</span><span class="p">,-</span><span class="m">1</span><span class="p">,</span><span class="n">Random</span><span class="p">.</span><span class="k">value</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">.</span><span class="m">1f</span><span class="p">)</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">5f</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="hll"><span class="w">    </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">DestroyOnTouch</span><span class="p">&gt;();</span><span class="w"></span>
</span><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The highlighted line shows how the (publicly known) <code>DestroyOnTouch</code> is added as a component to each new <code>cubeGo</code> object, just before it is returned.</p>
<p>Save this code and try it out:</p>
<div style='border-color: #018281; border-style: solid;'>
<div style='overflow: hidden; margin-top:-5.1%; margin-bottom:-34%; position:relative; padding-bottom:calc(70.80% + 33px); clip-path: inset(6.7% 0 45% 0)'>
<iframe src='https://gfycat.com/ifr/heartfeltevergreenkilldeer?controls=0&hd=1' frameborder='0' scrolling='no'' width='100%' height='100%' style='position:absolute;top:0;left:0;'></iframe>
</div></div>

<h3 id="making-it-pop">Making it pop</h3>
<p>Let's turn the chore of cleaning up cubes into a more fun activity by adding some pop.</p>
<p>As immersive as VR is, you can heighten this even more by engaging additional senses, such as our hearing. Unity is of course capable of audio playback, so let's have it play a short sample every time we destroy a cube, such a simple "pop" sound.</p>
<div class="admonition question">
<p class="admonition-title">Where to get sound samples?</p>
<p>If you're not inclined to <a href="https://www.audacityteam.org/">record</a> or <a href="https://supercollider.github.io">synthesize</a> your own audio, the popular website <a href="https://freesound.org">freesound.org</a> is a great, free, source of all kinds of audible material.</p>
<p>To save you some time for now, you can also download this .mp3 clip and use it: <a href="pop.mp3" download>pop.mp3</a></p>
</div>
<p>Create a new folder in Assets called <code>Resources</code>, and store your audio sample there and rename it <code>pop.mp3</code>, if it's not already called that.</p>
<p>Go back to our <code>CreateCube()</code> function and add two lines:</p>
<div class="highlight"><span class="filename">CubeFactory.cs</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">public</span><span class="w"> </span><span class="n">GameObject</span><span class="w"> </span><span class="nf">CreateCube</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="n">GameObject</span><span class="w"> </span><span class="n">cubeGo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">CreatePrimitive</span><span class="p">(</span><span class="n">PrimitiveType</span><span class="p">.</span><span class="n">Cube</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="n">Transform</span><span class="w"> </span><span class="n">cubeTrans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="n">cubeTrans</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(-</span><span class="m">1f</span><span class="p">,</span><span class="w"> </span><span class="m">0.9f</span><span class="p">,</span><span class="w"> </span><span class="m">0f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="n">cubeTrans</span><span class="p">.</span><span class="n">localScale</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(.</span><span class="m">15f</span><span class="p">,.</span><span class="m">15f</span><span class="p">,.</span><span class="m">15f</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;().</span><span class="n">material</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Random</span><span class="p">.</span><span class="n">ColorHSV</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="n">Rigidbody</span><span class="w"> </span><span class="n">cubeRB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="c1">// Add randomness otherwise cubes will all show the exact same trajectory</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">    </span><span class="n">cubeRB</span><span class="p">.</span><span class="n">velocity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="k">value</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">.</span><span class="m">1f</span><span class="p">,-</span><span class="m">1</span><span class="p">,</span><span class="n">Random</span><span class="p">.</span><span class="k">value</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">.</span><span class="m">1f</span><span class="p">)</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">5f</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">    </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">DestroyOnTouch</span><span class="p">&gt;();</span><span class="w"></span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="hll"><span class="w">    </span><span class="n">AudioSource</span><span class="w"> </span><span class="n">cubeAS</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">AudioSource</span><span class="p">&gt;();</span><span class="w"></span>
</span><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="hll"><span class="w">    </span><span class="n">cubeAS</span><span class="p">.</span><span class="n">clip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">AudioClip</span><span class="p">&gt;(</span><span class="s">&quot;pop&quot;</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">cubeGo</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>With those, we're adding another component to the new cubes, this time an <a href="https://docs.unity3d.com/2020.1/Documentation/ScriptReference/AudioSource.html"><code>AudioSource</code></a>, and loading into its <code>clip</code> component our .mp3 file, using <a href="https://docs.unity3d.com/2020.1/Documentation/ScriptReference/Resources.html"><code>Resources.Load&lt;AudioClip&gt;("pop")</code></a>.</p>
<p>The latter call will actually search the Resources folder we created above for any audio files that are named "pop" before their file type extension, which is why it was important to name our clip "pop.mp3".</p>
<p>Go back to our <code>DestroyOnTouch</code> script to modify it. We're adding a new <code>private</code> variable called <code>_audioSource</code>, and fetch it from the component the factory is now adding to new cubes using the <code>Start()</code> function.</p>
<div class="highlight"><span class="filename">DestroyOnTouch.cs</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">DestroyOnTouch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">AudioSource</span><span class="w"> </span><span class="n">_audioSource</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">        </span><span class="n">_audioSource</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">AudioSource</span><span class="p">&gt;();</span><span class="w"> </span><span class="c1">// Last part of the tutorial (with pop sound added)</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<details class="info">
<summary>Wen Start()?</summary>
<p><code>Start()</code> is actually not always called "before the first frame update" as its comment implies. If an object was created during the duration of the game, many frames could have obviously passed before this event. Furthermore, if an object is created and <em>deactivated</em> immediately before any frames have passed, <code>start()</code> is still not called.</p>
<p>It is only ever called when just before an object "experiences" its first passing frame.</p>
</details>
<p>Now let's change the remainder of <code>DestroyOnTouch</code> to actually play back the sound on destruction:</p>
<div class="highlight"><span class="filename">DestroyOnTouch.cs</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="hll"><span class="w">    </span><span class="c1">// Destroy(gameObject);</span>
</span><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="hll"><span class="w">    </span><span class="n">StartCoroutine</span><span class="p">(</span><span class="n">PlayAudioThenDestroy</span><span class="p">());</span><span class="w"> </span><span class="c1">// Last part of the tutorial (with pop sound added)</span>
</span><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="k">private</span><span class="w"> </span><span class="n">IEnumerator</span><span class="w"> </span><span class="nf">PlayAudioThenDestroy</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="c1">// Hide object</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">    </span><span class="n">Destroy</span><span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;());</span><span class="w"></span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">    </span><span class="c1">// Delete collider component to prevent calling this coroutine twice</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">    </span><span class="n">Destroy</span><span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;());</span><span class="w"></span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">    </span><span class="c1">// Play pop sound</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">    </span><span class="n">_audioSource</span><span class="p">.</span><span class="n">Play</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">    </span><span class="k">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">WaitUntil</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">!</span><span class="n">_audioSource</span><span class="p">.</span><span class="n">isPlaying</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">    </span><span class="c1">// Actually destroy the object now</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">    </span><span class="n">Destroy</span><span class="p">(</span><span class="n">gameObject</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>In <code>OnTriggerEnter()</code>, we <em>comment out</em> our previous line that simply destroys the object (rendering it inert) and instead add a <code>StartCoroutine()</code> call on the <code>IEnumerator</code> block we declare below.</p>
<div class="admonition info">
<p class="admonition-title">Coroutines</p>
<p><a href="https://docs.unity3d.com/2020.1/Documentation/ScriptReference/Coroutine.html"><em>Coroutines</em></a> are a very powerful feature of Unity (and overall <a href="https://en.wikipedia.org/wiki/Coroutine">computing concept</a>), which allow delayed execution of code without tying up the whole system — effectively allowing parallel execution of multiple things.</p>
<p>This will be explored in more detail in the <a href="../4-coroutines/">following tutorial</a>, but feel free to try to understand the <code>PlayAudioThenDestroy()</code> function here from its context and comments.</p>
</div>
<p>Save the code, run the game. It pops!</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../2-vr-interaction/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 2 • Interaction in VR" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              2 • Interaction in VR
            </div>
          </div>
        </a>
      
      
        
        <a href="../4-coroutines/" class="md-footer__link md-footer__link--next" aria-label="Next: 4 • Coroutines" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              4 • Coroutines
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.instant", "navigation.indexes", "toc.follow", "header.autohide"], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>